<!doctype html>
<html lang="id" class="scroll-smooth">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>Wahana — Tiket (Layout v5)</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/flatpickr/dist/flatpickr.min.css">
  <script src="https://cdn.jsdelivr.net/npm/flatpickr"></script>
  <style>
    .framer-card { @apply bg-white dark:bg-slate-900 border border-transparent rounded-2xl shadow-lg p-6; }
    header { backdrop-filter: blur(6px); -webkit-backdrop-filter: blur(6px); }
    :root { color-scheme: light dark; }

    /* visit type animation */
    .visit-type { transition: transform .28s cubic-bezier(.2,.9,.3,1), box-shadow .28s, border-color .2s; }
    .visit-type.selected { transform: translateY(-6px) scale(1.02); box-shadow: 0 10px 30px rgba(2,6,23,0.12); border-color: rgba(79,70,229,1); }

    /* quantity circle smaller */
    .qty-circle{ display:inline-flex; align-items:center; justify-content:center; width:33px; height:33px; border-radius:9999px; border:2px solid rgba(79,70,229,1); background:transparent }
    .qty-icon { width:14px; height:14px }

    /* addon card selected */
    .addon-card { transition: transform .18s, box-shadow .18s, border-color .18s; }
    .addon-card[data-selected="true"] { transform: translateY(-4px); box-shadow: 0 8px 24px rgba(2,6,23,0.08); border-color: rgba(34,197,94,0.9); }

    /* mobile safe area for CTA */
    .safe-bottom { padding-bottom: calc(env(safe-area-inset-bottom) + 8px); }

    /* unified border color for selects and inputs (inactive by default) */
    .inactive-border { border-color: #e6e9ee; }
    .active-border { border-color: rgba(79,70,229,1); }

    /* slightly larger labels */
    .label-lg { font-size: 0.95rem; }

    /* header color distinct from body on light mode */
    .header-light { background-color: #f8fafc; } /* slightly off-white */
  </style>
</head>
<body class="min-h-screen bg-slate-50 dark:bg-slate-800 text-slate-900 dark:text-slate-100 transition-colors duration-300">
  <header class="fixed top-4 left-1/2 -translate-x-1/2 w-[95%] max-w-5xl z-50 framer-card flex items-center justify-between gap-4 header-light dark:bg-slate-900">
    <div class="flex items-center gap-4">
      <img src="https://via.placeholder.com/44" alt="logo" class="w-11 h-11 rounded-lg object-cover"/>
      <div>
        <div class="text-lg font-semibold" data-i18n="park_name">Taman Hiburan Ceria</div>
        <div class="text-sm text-slate-500 dark:text-slate-400" data-i18n="park_info">Jalan Bahagia 123 • +62 812-3456-7890</div>
      </div>
    </div>

    <div class="flex items-center gap-3 relative">
      <!-- Language dropdown -->
      <div class="relative">
        <button id="langSwitch" class="flex items-center gap-2 px-3 py-2 rounded-xl hover:bg-slate-100 dark:hover:bg-slate-700 transition inactive-border" aria-haspopup="listbox" aria-expanded="false">
          <img id="langFlag" src="https://flagcdn.com/id.svg" alt="id" class="w-5 h-5 rounded-sm" />
          <span id="langLabel" class="font-medium">ID</span>
          <svg class="w-4 h-4" viewBox="0 0 24 24" fill="none"><path d="M6 9l6 6 6-6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
        </button>
        <ul id="langMenu" class="absolute right-0 mt-2 w-36 bg-white dark:bg-slate-800 rounded-lg shadow-lg border hidden z-40">
          <li><button class="w-full text-left px-3 py-2 hover:bg-slate-100 dark:hover:bg-slate-700" data-lang="id">Indonesia</button></li>
          <li><button class="w-full text-left px-3 py-2 hover:bg-slate-100 dark:hover:bg-slate-700" data-lang="en">English</button></li>
        </ul>
      </div>

      <!-- Theme toggle -->
      <button id="themeToggle" aria-label="Toggle theme" class="p-2 rounded-lg hover:bg-slate-100 dark:hover:bg-slate-700 transition flex items-center inactive-border">
        <svg id="iconMoon" class="w-6 h-6" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
        <svg id="iconSun" class="w-6 h-6 hidden" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 3v2M12 19v2M4.2 4.2l1.4 1.4M18.4 18.4l1.4 1.4M1 12h2M21 12h2M4.2 19.8l1.4-1.4M18.4 5.6l1.4-1.4M12 7a5 5 0 100 10 5 5 0 000-10z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/></svg>
      </button>
    </div>
  </header>

  <main class="pt-28 pb-16 flex justify-center">
    <section class="w-[95%] max-w-3xl">

      <!-- HERO IMAGE -->
      <div class="rounded-2xl overflow-hidden mb-4 shadow-md">
        <img src="https://via.placeholder.com/1200x400" alt="hero" class="w-full h-44 object-cover sm:h-64" />
      </div>

      <!-- INFO CARD -->
      <div class="framer-card mb-4">
        <div class="flex gap-4 items-start">
          <img src="https://via.placeholder.com/64" alt="logo" class="w-16 h-16 rounded-lg object-cover"/>
          <div>
            <div class="text-xl font-semibold" data-i18n="park_name">Taman Hiburan Ceria</div>
            <div class="text-sm text-slate-500 dark:text-slate-400" data-i18n="park_info">Jalan Bahagia 123 • +62 812-3456-7890</div>
            <div class="text-xs text-slate-500 dark:text-slate-400 mt-2">Buka 09:00 - 18:00</div>
          </div>
        </div>
      </div>

      <!-- 1) Tipe kunjungan -->
      <div class="framer-card mb-4">
        <div class="label-lg font-medium mb-2">Tipe kunjungan</div>
        <div class="flex gap-3">
          <label id="personalLabel" class="visit-type flex-1 p-3 rounded-lg border cursor-pointer text-center">
            <input id="visitPersonal" type="radio" name="visitType" value="personal" checked class="hidden" />
            <div class="font-medium">Personal</div>
            <div class="text-xs text-slate-500 dark:text-slate-400">Satu pengunjung</div>
          </label>
          <label id="groupLabel" class="visit-type flex-1 p-3 rounded-lg border cursor-pointer text-center">
            <input id="visitGroup" type="radio" name="visitType" value="group" class="hidden" />
            <div class="font-medium">Group</div>
            <div class="text-xs text-slate-500 dark:text-slate-400">Beberapa pengunjung</div>
          </label>
        </div>

        <!-- Group form (hidden by default) -->
        <div id="groupForm" class="mt-4 hidden">
          <label class="label-lg block mb-2">Nama Group</label>
          <input id="groupName" class="w-full p-3 rounded-lg inactive-border border bg-transparent focus:outline-none mb-3" placeholder="Nama group / organisasi" />
          <label class="label-lg block mb-2">Ukuran Group</label>
          <input id="groupSize" type="number" min="1" class="w-full p-3 rounded-lg inactive-border border bg-transparent focus:outline-none" placeholder="Jumlah anggota" />
        </div>
      </div>

      <!-- 2) Tanggal kunjungan -->
      <div class="framer-card mb-4">
        <label class="label-lg block mb-2">Tanggal kunjungan</label>
        <input id="datePicker" class="w-full p-3 rounded-lg inactive-border border bg-transparent focus:outline-none" placeholder="Pilih tanggal" />
      </div>

      <!-- 3) Pilihan tiket (each card has adult/child counts) -->
      <div class="framer-card mb-4">
        <div class="label-lg font-medium mb-3">Pilih tiket</div>

        <!-- Ticket: Wahana -->
        <div class="border rounded-lg p-4 mb-3">
          <div class="flex justify-between items-start">
            <div>
              <div class="font-medium">Tiket Wahana</div>
              <div class="text-xs text-slate-500 dark:text-slate-400">Akses wahana umum</div>
            </div>
            <div class="text-sm font-semibold">Rp 120.000</div>
          </div>

          <div class="mt-4 grid grid-cols-2 gap-4">
            <div class="p-3 rounded-lg border flex flex-col items-center">
              <div class="text-sm text-slate-500 dark:text-slate-400 mb-2">Dewasa</div>
              <div class="flex items-center gap-4">
                <button class="qty-circle" data-type="wahana-adult" data-action="decrease" aria-label="decrease adult">
                  <svg class="qty-icon" viewBox="0 0 24 24" fill="none"><path d="M5 12h14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
                </button>
                <div id="wahana-adult-count" class="text-2xl font-semibold">1</div>
                <button class="qty-circle" data-type="wahana-adult" data-action="increase" aria-label="increase adult">
                  <svg class="qty-icon" viewBox="0 0 24 24" fill="none"><path d="M12 5v14M5 12h14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
                </button>
              </div>
            </div>
            <div class="p-3 rounded-lg border flex flex-col items-center">
              <div class="text-sm text-slate-500 dark:text-slate-400 mb-2">Anak</div>
              <div class="flex items-center gap-4">
                <button class="qty-circle" data-type="wahana-child" data-action="decrease" aria-label="decrease child">
                  <svg class="qty-icon" viewBox="0 0 24 24" fill="none"><path d="M5 12h14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
                </button>
                <div id="wahana-child-count" class="text-2xl font-semibold">0</div>
                <button class="qty-circle" data-type="wahana-child" data-action="increase" aria-label="increase child">
                  <svg class="qty-icon" viewBox="0 0 24 24" fill="none"><path d="M12 5v14M5 12h14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
                </button>
              </div>
            </div>
          </div>
        </div>

        <!-- Ticket: Atraksi -->
        <div class="border rounded-lg p-4 mb-3">
          <div class="flex justify-between items-start">
            <div>
              <div class="font-medium">Tiket Atraksi</div>
              <div class="text-xs text-slate-500 dark:text-slate-400">Akses pertunjukan khusus</div>
            </div>
            <div class="text-sm font-semibold">Rp 80.000</div>
          </div>

          <div class="mt-4 grid grid-cols-2 gap-4">
            <div class="p-3 rounded-lg border flex flex-col items-center">
              <div class="text-sm text-slate-500 dark:text-slate-400 mb-2">Dewasa</div>
              <div class="flex items-center gap-4">
                <button class="qty-circle" data-type="atraksi-adult" data-action="decrease" aria-label="decrease adult">
                  <svg class="qty-icon" viewBox="0 0 24 24" fill="none"><path d="M5 12h14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
                </button>
                <div id="atraksi-adult-count" class="text-2xl font-semibold">0</div>
                <button class="qty-circle" data-type="atraksi-adult" data-action="increase" aria-label="increase adult">
                  <svg class="qty-icon" viewBox="0 0 24 24" fill="none"><path d="M12 5v14M5 12h14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
                </button>
              </div>
            </div>
            <div class="p-3 rounded-lg border flex flex-col items-center">
              <div class="text-sm text-slate-500 dark:text-slate-400 mb-2">Anak</div>
              <div class="flex items-center gap-4">
                <button class="qty-circle" data-type="atraksi-child" data-action="decrease" aria-label="decrease child">
                  <svg class="qty-icon" viewBox="0 0 24 24" fill="none"><path d="M5 12h14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
                </button>
                <div id="atraksi-child-count" class="text-2xl font-semibold">0</div>
                <button class="qty-circle" data-type="atraksi-child" data-action="increase" aria-label="increase child">
                  <svg class="qty-icon" viewBox="0 0 24 24" fill="none"><path d="M12 5v14M5 12h14" stroke="currentColor" stroke-width="2" stroke-linecap="round"/></svg>
                </button>
              </div>
            </div>
          </div>
        </div>

      </div>

      <!-- 4) Tambahan as select-cards -->
      <div class="framer-card mb-4">
        <div class="label-lg font-medium mb-3">Tambahan</div>
        <div class="grid grid-cols-1 gap-3">
          <button type="button" class="addon-card border rounded-lg p-3 text-left inactive-border" data-addon="stroller" data-selected="false">
            <div class="flex justify-between items-center">
              <div>
                <div class="font-medium">Sewa Stroller</div>
                <div class="text-xs text-slate-500 dark:text-slate-400">Per unit</div>
              </div>
              <div class="text-sm font-semibold">Rp 30.000</div>
            </div>
          </button>

          <button type="button" class="addon-card border rounded-lg p-3 text-left inactive-border" data-addon="fastpass" data-selected="false">
            <div class="flex justify-between items-center">
              <div>
                <div class="font-medium">Fast Pass</div>
                <div class="text-xs text-slate-500 dark:text-slate-400">Lewati antrean</div>
              </div>
              <div class="text-sm font-semibold">Rp 50.000</div>
            </div>
          </button>
        </div>
      </div>

      <!-- 5) Ringkasan -->
      <div class="framer-card mb-6">
        <h3 class="font-semibold mb-3">Ringkasan</h3>
        <div class="space-y-2 text-sm text-slate-700 dark:text-slate-200">
          <div class="flex justify-between"><span>Tipe</span><span id="summaryType">Personal</span></div>
          <div class="flex justify-between"><span>Tanggal</span><span id="summaryDate">-</span></div>
          <div class="flex justify-between"><span>Tiket Wahana</span><span id="summaryWahana">D1 / C0</span></div>
          <div class="flex justify-between"><span>Tiket Atraksi</span><span id="summaryAtraksi">D0 / C0</span></div>
          <div class="flex justify-between"><span>Tambahan</span><span id="summaryAddons">-</span></div>
          <div class="flex justify-between text-base font-semibold"><span>Total</span><span id="summaryTotal">Rp 0</span></div>
        </div>
      </div>

      <!-- 6) Button pesan (desktop only) -->
      <div class="mb-12 md:mb-8">
        <button id="checkoutBtnDesktop" class="hidden md:block w-full py-3 rounded-xl font-semibold bg-indigo-600 text-white hover:bg-indigo-700 dark:bg-indigo-500 dark:hover:bg-indigo-600">Pesan Tiket</button>
      </div>

    </section>
  </main>

  <!-- Mobile fixed CTA (hidden on md and up) -->
  <div class="fixed bottom-4 left-1/2 -translate-x-1/2 w-[95%] max-w-3xl md:hidden safe-bottom">
    <div class="bg-white dark:bg-slate-900 rounded-2xl shadow-lg p-4 flex items-center justify-between gap-4">
      <div>
        <div class="text-sm text-slate-500 dark:text-slate-400">Total</div>
        <div class="font-semibold text-lg" id="bottomTotal">Rp 0</div>
      </div>
      <button id="checkoutBtnMobile" class="py-3 px-6 rounded-xl font-semibold bg-indigo-600 text-white hover:bg-indigo-700 dark:bg-indigo-500 dark:hover:bg-indigo-600">Pesan</button>
    </div>
  </div>

  <script>
    // language + theme + interactions
    let currentLang = 'id';
    function applyLang(lang){
      currentLang = lang;
      document.getElementById('langLabel').textContent = lang === 'id' ? 'ID' : 'EN';
      document.getElementById('langFlag').src = lang === 'id' ? 'https://flagcdn.com/id.svg' : 'https://flagcdn.com/gb.svg';
      // small translations
      const t = {
        id: { 'Tipe kunjungan':'Tipe kunjungan','Tanggal kunjungan':'Tanggal kunjungan','Pilih tiket':'Pilih tiket','Tambahan':'Tambahan','Ringkasan':'Ringkasan','Pesan Tiket':'Pesan Tiket','Pesan':'Pesan' },
        en: { 'Tipe kunjungan':'Visit type','Tanggal kunjungan':'Visit date','Pilih tiket':'Choose tickets','Tambahan':'Add-ons','Ringkasan':'Summary','Pesan Tiket':'Book tickets','Pesan':'Book' }
      };
      document.querySelectorAll('.label-lg').forEach(el=>{ const key = el.textContent.trim(); if(t[lang] && t[lang][key]) el.textContent = t[lang][key]; });
      document.getElementById('checkoutBtnDesktop').textContent = (t[lang] && t[lang]['Pesan Tiket']) || document.getElementById('checkoutBtnDesktop').textContent;
      document.getElementById('checkoutBtnMobile').textContent = (t[lang] && t[lang]['Pesan']) || document.getElementById('checkoutBtnMobile').textContent;
    }

    document.getElementById('langSwitch').addEventListener('click', ()=>{
      const menu = document.getElementById('langMenu');
      menu.classList.toggle('hidden');
    });
    document.querySelectorAll('#langMenu [data-lang]').forEach(btn=>{
      btn.addEventListener('click', ()=>{ const l = btn.getAttribute('data-lang'); applyLang(l); document.getElementById('langMenu').classList.add('hidden'); });
    });
    applyLang('id');

    // theme
    const saved = localStorage.getItem('theme');
    const prefersDark = window.matchMedia && window.matchMedia('(prefers-color-scheme: dark)').matches;
    if (saved === 'dark' || (!saved && prefersDark)) document.documentElement.classList.add('dark');
    function updateThemeIcon(){ const isDark = document.documentElement.classList.contains('dark'); document.getElementById('iconMoon').classList.toggle('hidden', isDark); document.getElementById('iconSun').classList.toggle('hidden', !isDark); }
    updateThemeIcon();
    document.getElementById('themeToggle').addEventListener('click', ()=>{ const isDark = document.documentElement.classList.toggle('dark'); localStorage.setItem('theme', isDark ? 'dark' : 'light'); updateThemeIcon(); });

    // flatpickr init
    document.addEventListener('DOMContentLoaded', function(){
      if (typeof flatpickr !== 'undefined'){
        flatpickr('#datePicker', { minDate: 'today', altInput: true, altFormat: 'F j, Y', dateFormat: 'Y-m-d', onOpen: function(){ document.getElementById('datePicker').classList.add('active-border'); document.getElementById('datePicker').classList.remove('inactive-border'); }, onClose: function(){ if(!document.getElementById('datePicker')._flatpickr.selectedDates.length){ document.getElementById('datePicker').classList.remove('active-border'); document.getElementById('datePicker').classList.add('inactive-border'); } }, onChange: function(selectedDates, dateStr, instance){ document.getElementById('summaryDate').textContent = instance.altInput.value; updateSummary(); document.getElementById('datePicker').classList.add('active-border'); document.getElementById('datePicker').classList.remove('inactive-border'); } });
        // set initial inactive look
        document.getElementById('datePicker').classList.add('inactive-border');
      } else console.warn('flatpickr not loaded');
    });

    // data model
    const prices = { wahana:120000, atraksi:80000, stroller:30000, fastpass:50000 };
    const counts = { 'wahana-adult':1, 'wahana-child':0, 'atraksi-adult':0, 'atraksi-child':0 };
    const addons = { stroller:false, fastpass:false };

    function numberWithCommas(x){ return x.toLocaleString('id-ID'); }
    function calcTotal(){
      const wahanaTotal = counts['wahana-adult'] * prices.wahana + counts['wahana-child'] * Math.round(prices.wahana * 0.66);
      const atraksiTotal = counts['atraksi-adult'] * prices.atraksi + counts['atraksi-child'] * Math.round(prices.atraksi * 0.66);
      let total = wahanaTotal + atraksiTotal;
      if (addons.stroller) total += prices.stroller;
      if (addons.fastpass) total += prices.fastpass;
      return total;
    }

    function updateSummary(){
      const typeEl = document.querySelector('[name=visitType]:checked');
      const type = typeEl ? (typeEl.value) : 'personal';
      document.getElementById('summaryType').textContent = type === 'personal' ? (currentLang==='id'?'Personal':'Personal') : (currentLang==='id'?'Group':'Group');
      document.getElementById('summaryWahana').textContent = `D${counts['wahana-adult']} / C${counts['wahana-child']}`;
      document.getElementById('summaryAtraksi').textContent = `D${counts['atraksi-adult']} / C${counts['atraksi-child']}`;
      const addonList = [];
      if (addons.stroller) addonList.push('Stroller');
      if (addons.fastpass) addonList.push('Fast Pass');
      document.getElementById('summaryAddons').textContent = addonList.length ? addonList.join(', ') : '-';
      const total = calcTotal();
      document.getElementById('summaryTotal').textContent = 'Rp ' + numberWithCommas(total);
      document.getElementById('bottomTotal').textContent = 'Rp ' + numberWithCommas(total);
    }

    // qty buttons
    document.querySelectorAll('.qty-circle').forEach(btn => {
      btn.addEventListener('click', () => {
        const type = btn.getAttribute('data-type');
        const action = btn.getAttribute('data-action');
        if (!type) return;
        if (action === 'increase') counts[type] = Math.min(20, counts[type] + 1);
        else counts[type] = Math.max(0, counts[type] - 1);
        const outEl = document.getElementById(type + '-count');
        if (outEl) outEl.textContent = counts[type];
        updateSummary();
      });
    });

    // addon toggle — update border color when selected
    document.querySelectorAll('.addon-card').forEach(btn => {
      btn.addEventListener('click', () => {
        const key = btn.getAttribute('data-addon');
        const selected = btn.getAttribute('data-selected') === 'true';
        btn.setAttribute('data-selected', (!selected).toString());
        addons[key] = !selected;
        // toggle border color
        btn.classList.toggle('active-border', addons[key]);
        btn.classList.toggle('inactive-border', !addons[key]);
        updateSummary();
      });
    });

    // visit type animation + show/hide group form
    function setTypeStyle(t){
      const p = document.getElementById('personalLabel');
      const g = document.getElementById('groupLabel');
      const groupForm = document.getElementById('groupForm');
      if (t === 'personal'){
        p.classList.add('selected'); g.classList.remove('selected');
        groupForm.classList.add('hidden');
      } else if (t === 'group') {
        g.classList.add('selected'); p.classList.remove('selected');
        groupForm.classList.remove('hidden');
      }
      updateSummary();
    }
    document.getElementById('personalLabel').addEventListener('click', ()=>{ document.getElementById('visitPersonal').checked = true; setTypeStyle('personal'); });
    document.getElementById('groupLabel').addEventListener('click', ()=>{ document.getElementById('visitGroup').checked = true; setTypeStyle('group'); });

    // initialize visit type default to personal
    setTypeStyle('personal');

    // checkout
    function checkout(){
      const date = (document.getElementById('datePicker')._flatpickr) ? document.getElementById('datePicker')._flatpickr.input.value : '';
      if (!date){ alert((currentLang==='id')?`Pilih tanggal kunjungan terlebih dahulu.`:`Please choose a visit date first.`); return; }
      const payload = { type: (document.querySelector('[name=visitType]:checked') || {}).value || 'personal', date, counts: { ...counts }, addons: { ...addons }, total: calcTotal() };
      alert(`${currentLang==='id' ? 'Pesanan:' : 'Order:'}
${JSON.stringify(payload, null, 2)}`);
    }
    document.getElementById('checkoutBtnDesktop').addEventListener('click', checkout);
    document.getElementById('checkoutBtnMobile').addEventListener('click', checkout);

    // init
    updateSummary();
  </script>
</body>
</html>
